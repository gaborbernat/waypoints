/*!
Waypoints Inview Shortcut Timer based - 3.1.1
Copyright Â© 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){"use strict";function t(o){this.options=i.Adapter.extend({},t.defaults,o),this.options.ratio=parseFloat(/(\d+)\%/.exec(this.options.offset)[1])/100,this.waypoints=[],this.timerVertical=null,this.timerHorizontal=null,this.timerVerticalDone=!1,this.timerHorizontalDone=!1,this.createWaypoints()}var i=window.Waypoint,o=function(){};t.prototype.createWaypoints=function(){function t(t,i,o){var e=(new Date).toISOString().split("T")[1];console.log(e+" "+o.options.debug+" "+t+" page="+o.context.innerHeight()+"X"+o.context.innerWidth()+"  div="+o.adapter.outerHeight()+"X"+o.adapter.outerWidth()+" dir "+i+" triggerPoint="+o.triggerPoint+" offset="+o.options.offset.call(o)+" with "+o.options.o+" axis "+o.axis)}function i(i,o,e,n){i.isHorizontal?o.timerHorizontalDone=!0:o.timerVerticalDone=!0,t("done ",n,e),o.timerVerticalDone===!0&&o.timerHorizontalDone===!0&&(o.options.callback(o.options),o.options.destroyOnValid?o.destroy():i.isHorizontal?o.timerHorizontal=null:o.timerVertical=null)}function o(o,e,n,r){var a=o.isHorizontal?e.timerHorizontal:e.timerVertical;null===a&&(t("enter",n,r),a=window.setTimeout(function(){i(o,e,r,n)},e.options.timeout),o.isHorizontal?e.timerHorizontal=a:e.timerVertical=a)}function e(i,o,e,n){var r=i.isHorizontal?o.timerHorizontal:o.timerVertical;null!==r&&(t("exit ",e,n),clearTimeout(r),i.isHorizontal?(o.timerHorizontalDone=!1,o.timerHorizontal=null):(o.timerVerticalDone=!1,o.timerVertical=null))}function n(){return Math.round(-this.adapter.outerHeight()*u)}function r(){return Math.round(this.context.innerHeight()-this.adapter.outerHeight()*l)}function a(){return Math.round(-this.adapter.outerWidth()*u)}function s(){return Math.round(this.context.innerWidth()-this.adapter.outerWidth()*l)}var l=this.options.ratio,u=1-l,f={vertical:[{up:o,down:e,offset:n,o:"topOffset"},{up:e,down:o,offset:r,o:"bottomOffset"}],horizontal:[{left:o,right:e,offset:a,o:"leftOffset"},{left:e,right:o,offset:s,o:"rightOffset"}]};this.generateWaypoints(f.vertical,!1),this.generateWaypoints(f.horizontal,!0)},t.prototype.generateWaypoints=function(t,o){for(var e=0;e<t.length;e++)this.createWaypoint(i.Adapter.extend({},{isHorizontal:o,debug:this.options.debug},t[e]))},t.prototype.createWaypoint=function(t){this.waypoints.push(new i({element:this.options.element,handler:function(t,i){return function(o){t[o](t,i,o,this)}}(t,this),offset:t.offset,horizontal:t.isHorizontal,debug:t.debug,o:t.o}))},t.prototype.destroy=function(){for(var t=0,i=this.waypoints.length;i>t;t++)this.waypoints[t].destroy();this.waypoints=[]},t.defaults={timeout:100,offset:"80%",callback:o,destroyOnValid:!0},i.InviewTimer=t}();